\chapter{Application source code for QNodeOS experiments}
\label{qnodeos:sec:app_source}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=Python,
  caption={
    \acf{DQC} source code for the server.
  },
  label={src:dqc_server}
]{chapters/main/qnodeos/source/delcomp_server.py}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=Python,
  caption={
    \acf{DQC} source code for the client.
  },
  label={src:dqc_client}
]{chapters/main/qnodeos/source/delcomp_client.py}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=Python,
  caption={
    \acf{LGT} source code.
  },
  label={src:lgt}
]{chapters/main/qnodeos/source/tomography.py}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=Python,
  caption={
    Pseudocode illustrating the \ac{CNPU} runner. It can instantiate multiple programs, like the ones defined in~\cref{src:dqc_server,src:dqc_client,src:lgt}. Each program is submitted for concurrent execution to a thread pool executor which is managed by the host \ac{OS}. Each program independently sets up a connection with the \ac{QNPU}, and executes the program code itself.
  },
  label={src:cnpu_runner}
]{chapters/main/qnodeos/source/host_runner.py}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=netqasm,
  caption={
    \ac{NetQASM} subroutine S1 of the \ac{DQC} application.
    Compiled by the \ac{DQC} server program code listed in~\cref{src:dqc_server}.
  },
  label={src:netqasm_dqc_s1}
]{chapters/main/qnodeos/source/dqc_S1.nqasm}


\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=netqasm,
  caption={
    \ac{NetQASM} subroutine S2 of the \ac{DQC} application. Compiled by the \ac{DQC} server program code listed in~\cref{src:dqc_server}. The exact gates may differ depending on the iteration of the program loop and the $\delta$ value sent by the client.
  },
  label={src:netqasm_dqc_s2}
]{chapters/main/qnodeos/source/dqc_S2.nqasm}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=netqasm,
  caption={
    \ac{NetQASM} subroutine C1 of the \ac{DQC} application. Compiled by the \ac{DQC} client program code listed in~\cref{src:dqc_client}. The exact gates may differ depending on the \ac{DQC} parameters $\alpha$ and $\theta$.
  },
  label={src:netqasm_dqc_c1}
]{chapters/main/qnodeos/source/dqc_C1.nqasm}

\clearpage

\lstinputlisting[
  basicstyle=\small\ttfamily,
  language=netqasm,
  caption={
    \ac{NetQASM} subroutine L1 of the \ac{LGT} application. Compiled by the \ac{LGT} program code listed in~\cref{src:lgt}. The exact gates may differ depending on the iteration of the program loop.
  },
  label={src:netqasm_lgt_l1}
]{chapters/main/qnodeos/source/lgt.nqasm}